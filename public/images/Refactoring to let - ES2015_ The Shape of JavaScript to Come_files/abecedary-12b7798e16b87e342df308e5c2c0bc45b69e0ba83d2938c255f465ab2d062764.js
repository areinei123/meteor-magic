function normalizeErrorInfo(positionRegex,stackLines,index){var matches=positionRegex.exec(stackLines[index]),line=parseInt(matches[2],10),ch=parseInt(matches[3],10);return stackLines[index]=stackLines[index].replace(positionRegex,"$1"+line+":$3"),{line:line,ch:ch,stack:stackLines.join("\n")}}!eval&&execScript&&execScript("null"),function(window,parent){window.stuffEmit=parent.stuffEmit,window.generateStacktraceAndPosition=function(error){var stack=error.stack.split("\n"),sansParensStack=/([^\d]*)(\d+):(\d+)$/,parensStack=/([^\d])(\d+):(\d+)\)$/,normalizedErrorInfo={};return void 0!=error.line?normalizedErrorInfo={line:error.line,ch:error.column,stack:error.stack}:sansParensStack.test(stack[0])?normalizedErrorInfo=normalizeErrorInfo(sansParensStack,stack,0):void 0!=error.description?normalizedErrorInfo=normalizeErrorInfo(parensStack,stack,1):sansParensStack.test(stack[1])?normalizedErrorInfo=normalizeErrorInfo(sansParensStack,stack,1):parensStack.test(stack[1])&&(normalizedErrorInfo=normalizeErrorInfo(parensStack,stack,1)),{name:error.name,message:error.message,stack:normalizedErrorInfo.stack,position:{line:normalizedErrorInfo.line,ch:normalizedErrorInfo.ch}}},window.systemjsError=function(error){if("string"==typeof error){var tokens=error.split(/\n\t?/),message=tokens.shift(),stack=tokens,error=new Error(message);error.stack=stack.join("\n	")}stuffEmit("error",window.generateStacktraceAndPosition(error))},window.onerror=function(message,url,lineNumber,column,error){var name,stack;error&&(name=error.name,stack=error.stack),stuffEmit("error",{name:name,message:message,stack:stack,position:{line:lineNumber,ch:column}})},stuffEmit("loaded")}(window,window.parent);